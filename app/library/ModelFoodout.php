<?php

class ModelFoodout extends Model
{
    public function initialize()
    {
        $this->setConnectionService('db');
    }

    public function create($data = [], $whiteList = [])
    {
        $createdObj = parent::create($data, $whiteList);

        if (isset($createdObj->LOCALIZED_TABLE) && isset($createdObj->LOCALIZED_FIELD) && count($createdObj->LOCALIZED_FIELD)) {
            ToolsHelper::createLocalization($createdObj);
        } elseif (isset($createdObj->LOCALIZED_TABLE) && !count($createdObj->LOCALIZED_FIELD)) {
            throw new Exception('No localization fields set');
        }

        return $createdObj;
    }

    public function update($data = null, $whiteList = null)
    {
        try {
            parent::update($data, $whiteList); // TODO: Change the autogenerated stub
        } catch (Exception $e) {
           echo $this->getSource() . PHP_EOL;

            echo $e->getMessage() . PHP_EOL;
            var_dump($data);
            var_dump($this->getSource());
            die();
        }
    }

}
